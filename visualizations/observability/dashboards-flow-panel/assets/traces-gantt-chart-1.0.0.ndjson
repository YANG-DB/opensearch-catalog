{"attributes":{"description":"traces gantt chart representing a trace transaction","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"traceId : 0057f9c3e14c4f225fc1a77dbb9cec0a\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"traces-gantt-chart","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"traces-gantt-chart\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n\\n  \\\"data\\\": {\\n  \\\"url\\\" :{\\n      \\\"%context%\\\": \\\"true\\\",\\n      \\\"%timefield%\\\": \\\"startTime\\\",\\n      \\\"index\\\": \\\"otel-v1-apm-span-*\\\",\\n      \\\"body\\\": {\\n        \\\"size\\\": 50\\n      }\\n    }\\n    \\\"format\\\":{\\n      \\\"type\\\": \\\"json\\\",\\n      \\\"property\\\":\\\"hits.hits\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n{\\\"calculate\\\": \\\"datum._source.durationInNanos / 1000000\\\", \\\"as\\\": \\\"durationInMs\\\"},\\n      {\\n    \\\"window\\\": [\\n      {\\n        \\\"op\\\": \\\"max\\\",\\n        \\\"field\\\": \\\"durationInMs\\\",\\n        \\\"as\\\": \\\"maxDuration\\\"\\n      }\\n    ],\\n    \\\"frame\\\": [null, null]\\n  },\\n  {\\n    \\\"calculate\\\": \\\"datum.durationInMs / datum.maxDuration\\\",\\n    \\\"as\\\": \\\"normalizedDuration\\\"\\n  },\\n  { \\\"calculate\\\": \\\"datum._source.traceGroup\\\", \\\"as\\\": \\\"traceGroup\\\"},\\n    {      \\\"calculate\\\": \\\"toDate(datum._source.startTime)\\\", \\\"as\\\": \\\"currentDate\\\"},\\n            {      \\\"calculate\\\": \\\"toDate(datum._source.startTime)\\\", \\\"as\\\": \\\"startTime\\\"},\\n  {\\n    \\\"calculate\\\": \\\"format(datum.durationInMs, '.1f') + 'ms'\\\",\\n    \\\"as\\\": \\\"formattedDuration\\\"\\n  },    {\\n      \\\"calculate\\\": \\\"toDate(datum._source.endTime)\\\",  \\\"as\\\": \\\"endTime\\\" },\\n    {\\n      \\\"window\\\": [{\\\"op\\\": \\\"row_number\\\", \\\"as\\\": \\\"running_number\\\"}],\\n      \\\"groupby\\\": [\\\"_source.traceId\\\"],\\n      \\\"sort\\\": [{\\\"field\\\": \\\"currentDate\\\"}]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum._source.traceId + ' | ' + datum._source.traceGroup + '/' + datum._source.serviceName + ' | Start:' + toDate(datum._source.startTime) + ' #' + datum['running_number']\\\",\\n      \\\"as\\\": \\\"project_full_descr\\\"\\n    }\\n  ],\\n  \\n  \\\"title\\\": {\\n    \\\"text\\\": \\\"Order Gantt by: Trace > Span\\\",\\n    \\\"fontSize\\\": 14,\\n    \\\"anchor\\\": \\\"start\\\",\\n    \\\"dy\\\": -15,\\n    \\\"color\\\": \\\"#706D6C\\\"\\n  },\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"bar\\\",\\n        \\\"tooltip\\\": true,\\n        \\\"cornerRadiusTopRight\\\": 4,\\n        \\\"cornerRadiusBottomRight\\\": 4\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"project_full_descr\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"sort\\\": {\\\"field\\\": \\\"startTime\\\", \\\"order\\\": \\\"ascending\\\"},\\n          \\\"axis\\\": {\\n            \\\"domain\\\": true,\\n            \\\"grid\\\": true,\\n            \\\"ticks\\\": true,\\n            \\\"labels\\\": true,\\n            \\\"labelLimit\\\": 800,\\n            \\\"labelFontSize\\\": 12,\\n            \\\"labelPadding\\\": 10,\\n            \\\"labelExpr\\\": \\\"split(datum.label, '|')[1]\\\"\\n          },\\n        \\\"scale\\\": {\\n            \\\"padding\\\": 0.5\\n          },\\n          \\\"title\\\": null\\n        },\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"_source.startTime\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": \\\"time\\\"\\n        },\\n        \\\"x2\\\": {\\\"field\\\": \\\"_source.endTime\\\"},\\n         \\\"color\\\": {\\n          \\\"field\\\": \\\"_source.serviceName\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"legend\\\": {\\\"title\\\": \\\"Service Name\\\"},\\n          \\\"scale\\\": {\\\"scheme\\\": \\\"category10\\\"}\\n        },\\n          \\\"opacity\\\": {\\n    \\\"field\\\": \\\"normalizedDuration\\\",\\n    \\\"legend\\\":null,\\n    \\\"type\\\": \\\"quantitative\\\",\\n    \\\"scale\\\": {\\\"domain\\\": [0, 1], \\\"range\\\": [0.2, 1]}\\n  },\\n        \\\"tooltip\\\": [\\n          {\\\"field\\\": \\\"_source.serviceName\\\", \\\"title\\\": \\\"Service Name\\\"},\\n          {\\\"field\\\": \\\"formattedDuration\\\", \\\"title\\\": \\\"Duration\\\"},\\n          {\\\"field\\\": \\\"_source.traceId\\\", \\\"title\\\": \\\"Trace ID\\\"},\\n          {\\\"field\\\": \\\"_source.traceGroup\\\", \\\"title\\\": \\\"Trace Group\\\"}\\n        ]\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"strokeDash\\\": [2, 2], \\\"strokeWidth\\\": 2},\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"currentDate\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"right\\\",\\n        \\\"dx\\\": -24,\\n        \\\"dy\\\": 0,\\n        \\\"fontSize\\\": 9\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\\"field\\\": \\\"startTime\\\"},\\n        \\\"y\\\": {\\\"field\\\": \\\"project_full_descr\\\", \\\"type\\\": \\\"nominal\\\",\\n                \\\"sort\\\": {\\\"field\\\": \\\"startTime\\\", \\\"order\\\": \\\"ascending\\\"}\\n},\\n        \\\"text\\\": {\\\"field\\\": \\\"formattedDuration\\\"},\\n        \\\"color\\\": {\\\"value\\\": \\\"white\\\"}\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"left\\\",\\n        \\\"dx\\\": 5,\\n        \\\"dy\\\": 0,\\n        \\\"fontSize\\\": 9\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\\"field\\\": \\\"endTime\\\"},\\n        \\\"y\\\": {\\\"field\\\": \\\"project_full_descr\\\", \\\"type\\\": \\\"nominal\\\", \\\"sort\\\": {\\\"field\\\": \\\"startTime\\\", \\\"order\\\": \\\"ascending\\\"}},\\n        \\\"text\\\": {\\\"field\\\": \\\"formattedDuration\\\"},\\n        \\\"color\\\": {\\\"value\\\": \\\"black\\\"}\\n      }\\n    },\\n    \\n  ],\\n  \\\"config\\\": {\\\"view\\\": {\\\"stroke\\\": null}}\\n}\"}}"},"id":"39ccf260-cb7c-11ee-a521-338094947c89","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2024-02-14T22:11:05.555Z","version":"WzgsMTFd"}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}